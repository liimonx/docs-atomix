/**
 * AmbientBackground
 * =============================================================================
 * Multi-layer cinematic ambient backdrop for design-system documentation.
 *
 * Layers (back → front):
 *   1. Mesh gradient base
 *   2. Primary glow blob   (top-left)
 *   3. Secondary glow blob (bottom-right)
 *   4. Accent glow blob    (center)
 *   5. SVG noise grain overlay
 *   6. Vignette shadow ring
 */

// ---------------------------------------------------------------------------
// Keyframes
// ---------------------------------------------------------------------------

@keyframes ambient-drift-a {
  0%   { transform: translate(0, 0)   scale(1);    opacity: 0.55; }
  33%  { transform: translate(60px, -40px) scale(1.12); opacity: 0.7;  }
  66%  { transform: translate(-30px, 30px) scale(1.05); opacity: 0.6;  }
  100% { transform: translate(0, 0)   scale(1);    opacity: 0.55; }
}

@keyframes ambient-drift-b {
  0%   { transform: translate(0, 0)   scale(1);    opacity: 0.45; }
  33%  { transform: translate(-50px, 50px) scale(1.15); opacity: 0.65; }
  66%  { transform: translate(40px, -30px) scale(1.08); opacity: 0.5;  }
  100% { transform: translate(0, 0)   scale(1);    opacity: 0.45; }
}

@keyframes ambient-drift-c {
  0%   { transform: translate(0, 0)   scale(1);    opacity: 0.3;  }
  50%  { transform: translate(30px, 20px) scale(1.1);  opacity: 0.5;  }
  100% { transform: translate(0, 0)   scale(1);    opacity: 0.3;  }
}

@keyframes mesh-rotate {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

// ---------------------------------------------------------------------------
// Root container
// ---------------------------------------------------------------------------

.root {
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
  z-index: 0;
}

// ---------------------------------------------------------------------------
// Mesh gradient layer
// ---------------------------------------------------------------------------

.mesh {
  position: absolute;
  inset: -50%;
  width: 200%;
  height: 200%;
  background:
    conic-gradient(
      from 45deg at 40% 35%,
      rgba(19, 164, 236, 0.06) 0deg,
      rgba(147, 51, 234, 0.04) 90deg,
      rgba(34, 197, 94, 0.03)  180deg,
      rgba(19, 164, 236, 0.06) 360deg
    ),
    radial-gradient(
      ellipse at 30% 20%,
      rgba(19, 164, 236, 0.05) 0%,
      transparent 60%
    ),
    radial-gradient(
      ellipse at 70% 80%,
      rgba(147, 51, 234, 0.04) 0%,
      transparent 60%
    );
  animation: mesh-rotate 120s linear infinite;
  will-change: transform;
}

// ---------------------------------------------------------------------------
// Glow blobs (shared)
// ---------------------------------------------------------------------------

%glow {
  position: absolute;
  border-radius: 50%;
  filter: blur(90px);
  pointer-events: none;
  will-change: transform, opacity;
}

// Keep a concrete class for direct use if needed
.glow {
  @extend %glow;
}

// Primary glow — top-left, blue-cyan
.glowPrimary {
  @extend %glow;
  width: 700px;
  height: 700px;
  top: -18%;
  left: -8%;
  background: radial-gradient(
    circle,
    rgba(19, 164, 236, 0.18) 0%,
    rgba(19, 164, 236, 0) 70%
  );
  animation: ambient-drift-a 14s ease-in-out infinite;
}

// Secondary glow — bottom-right, purple
.glowSecondary {
  @extend %glow;
  width: 650px;
  height: 650px;
  bottom: -20%;
  right: -10%;
  background: radial-gradient(
    circle,
    rgba(147, 51, 234, 0.14) 0%,
    rgba(147, 51, 234, 0) 70%
  );
  animation: ambient-drift-b 18s ease-in-out infinite;
  animation-delay: -4s;
}

// Accent glow — center, green
.glowAccent {
  @extend %glow;
  width: 500px;
  height: 500px;
  top: 40%;
  left: 50%;
  margin-left: -250px;
  background: radial-gradient(
    circle,
    rgba(34, 197, 94, 0.10) 0%,
    rgba(34, 197, 94, 0) 70%
  );
  animation: ambient-drift-c 10s ease-in-out infinite;
  animation-delay: -2s;
}

// ---------------------------------------------------------------------------
// Noise / grain overlay
// ---------------------------------------------------------------------------

.noise {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  opacity: 0.035;
  mix-blend-mode: overlay;
  pointer-events: none;
  // Inline SVG noise — tiny and self-contained
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 256px 256px;
}

// ---------------------------------------------------------------------------
// Vignette
// ---------------------------------------------------------------------------

.vignette {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  box-shadow: inset 0 0 200px 60px rgba(0, 0, 0, 0.25);
}

// ---------------------------------------------------------------------------
// Intensity modifiers
// ---------------------------------------------------------------------------

.subtle {
  .glowPrimary   { opacity: 0.5; }
  .glowSecondary { opacity: 0.4; }
  .glowAccent    { opacity: 0.35; }
  .mesh          { opacity: 0.6; }
  .vignette      { opacity: 0.5; }
  .noise         { opacity: 0.02; }
}

.vivid {
  .glowPrimary   { opacity: 1; }
  .glowSecondary { opacity: 1; }
  .glowAccent    { opacity: 1; }
  .mesh          { opacity: 1; }
  .vignette      { opacity: 1; }
  .noise         { opacity: 0.05; }
}

// ---------------------------------------------------------------------------
// Responsive — reduce GPU pressure on mobile
// ---------------------------------------------------------------------------

@media (max-width: 768px) {
  .glowPrimary {
    width: 400px;
    height: 400px;
    filter: blur(60px);
  }

  .glowSecondary {
    width: 350px;
    height: 350px;
    filter: blur(60px);
  }

  .glowAccent {
    width: 280px;
    height: 280px;
    margin-left: -140px;
    filter: blur(50px);
  }

  .mesh {
    animation-duration: 180s;
  }
}

// ---------------------------------------------------------------------------
// Accessibility — reduced motion
// ---------------------------------------------------------------------------

@media (prefers-reduced-motion: reduce) {
  .glowPrimary,
  .glowSecondary,
  .glowAccent {
    animation: none;
  }

  .mesh {
    animation: none;
  }
}
